<!DOCTYPE html>
<html>
<body>
    <head>

        <style>

    .button{
        cursor:pointer;
    }
    @font-face {
        font-family: Canterbury;
        src: url('https://github.com/traysiMay/portfolio/blob/master/fonts/Canterbury.ttf');
        }
    @font-face {
        font-family: Condor-Regular-Bold;
        src: url('/fonts/Condor-Bold.woff2');
        }
      @font-face{
        font-family: IKANSEEYOUALLTrial-AllOfYou;
        src: url('/fonts/IKANSEEYOUALL.woff2');
        }
      @font-face{
        font-family: KRSNATrial-Medium;
        src: url('/fonts/KRSNATrial-Medium.woff2');
      }
      @font-face{
      font-family:StolzlDisplay-Bold;
        src: url('/fonts/Stolzl/Stolzl Display Bold.otf');
      }
      @font-face{
      font-family:CourierNewPS-BoldMT;
      src: url('/fonts/CourierNewPS-BoldMT.ttf');
      }
      @font-face{
      font-family:CourierNewPSMT;
      src: url('/fonts/CourierNewPSMT.ttf');
      }
      @font-face{
      font-family:Arial-BoldMT;
      src: url('/fonts/Arial-BoldMT.ttf');
      }
      div{
          margin:0 auto;
      }
      </style>
<div>
<!-- <svg id="header_nav" viewBox="0 0 1400 178.876" xml:space="preserve">
            </svg> -->
<!-- <svg id="body" viewBox="0 150 1400 1208.876" xml:space="preserve">
    </svg> -->
<div id="header_nav"></div>
<div id="mob_nav"></div>
<div id="body">
<svg></svg>
</div>
</div>

<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.6/chroma.min.js"></script><script type="text/JavaScript"></script>
  <script src="js/portfolio.js"></script>

<script>
    console.log(window.location.pathname);
    history.pushState({'state':'story'},'story','');
    var orientation;
    window.addEventListener("resize", mob_or_desk)
    mob_or_desk();
    function mob_or_desk(){
        var state = history.state.state;
        
        if (window.innerWidth > window.innerHeight){
            desk();
            if (state==="story"){
                desk_story();
            }
        } else {
            mob();
            if (state==="story"){
                mob_story();
            }
        }
    }
    function portfolio(){
        // portfolio
        d3.select('#body').transition().duration(2000).select('svg').attr('transform','translate(0,1000)')
            .on('end',function(){
                $('#body').load('portfolio.html',function(){
                        d3.select('#body').select('svg').attr('transform','translate(0,1000)')
                        .transition().duration(2000).attr('transform','translate(0,0)')
                        .on('end', function(){
                            main();
                        })
                        
                    });
             history.pushState({'state':'portfolio'},'portfolio','');
            })


    }
    //desk
    function desk_story(){
        // story

        d3.select('#body').transition().duration(2000).select('svg').attr('transform','translate(0,1000)')
            .on('end',function(){
                $('#body').load('story.html',function(){
                        d3.select('#body').select('svg').attr('transform','translate(0,1000)')
                        .transition().duration(2000).attr('transform','translate(0,0)')
                        
                    });
                    history.pushState({'state':'story'},'story','');
            })
    }
    // header_nav
    function desk(){
        $('#mob_nav').html('');
        $('#header_nav').load('header_nav.html', function(){
            
        $('#story_2_').click(desk_story);
        $('#short-portfolio_2_').click(portfolio);
        })
    }    
    
    
    //mob
    function mob_story(){
        // story
        d3.select('#body').transition().duration(2000).select('svg').attr('transform','translate(0,1000)')
            .on('end',function(){
                $('#body').load('story_mob.html',function(){
                        d3.select('#body').select('svg').attr('transform','translate(0,1000)')
                        .transition().duration(2000).attr('transform','translate(0,0)')
                        .on('end', function(){
                            main();
                        })
                        
                    });
                    history.pushState({'state':'story'},'story','');
            })
        
    }
    function mob(){
        $('#header_nav').load('header_mob.html', function(){
            $('#nav').click(mob_nav_click);
    })
    }

    function mob_nav_click(){
        if (document.getElementById('mob_nav_svg')){
            d3.select('#mob_nav').select('svg').transition().duration(2000).attr('viewBox','0 0 411 0')
            .on('end',function(){
            d3.select('#mob_nav').html('');
            d3.select("#nav").selectAll('path')
                            .transition().duration(2000).style('fill','black');
            });
            
        } else{
            pop_nav();
        }

        function pop_nav(){
            var mob_nav_svg = d3.select('#mob_nav').append('svg')
                .attr('height', '0px')
                .transition().duration(2000)
                .attr('height', '590px')
                .attr('viewBox', '0 0 411 250')
                .on('end', function(){

                    

                    $('#mob_nav').load('nav_pop.html', function(){
                        d3.select('#nav').selectAll('path')
                            .attr('fill','black')
                            .transition().duration(2000)
                            .attr('fill','red');
                        d3.select("#mob_nav").selectAll('text').style('fill','white')
                            .transition().duration(2000).style('fill','black');
                        d3.select("#mob_nav").selectAll('path').style('fill','white')
                            .transition().duration(2000).style('fill','black');
                        
                        $('#story_1_').click(mob_story);
                        $("#short-portfolio_1_").click(portfolio);

                    })

                })
        }
        
    }



</script>
</body>
</html>